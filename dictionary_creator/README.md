# dictionary-creator

`dict_creator.py` is a Python script which generates new nodes in any data dictionary in YAML format. The script parses two spreadsheets, `nodes.tsv` and `variables.tsv`, to generate the YAML files. Running the script requires two arguments:

* `-d/--directory`: Name of directory in `dictionary_creator/input_tsv/` which contains target `nodes.tsv` and `variables.tsv` files
* `-n/--namespace`: Namespace of the dictionary - e.g., niaid.bionimbus.org

The folder structure is as follows:
* `code/` contains the script and a folder containing configuration files, such as YAML templates specifying the schema format.
* `input_tsv/` contains the directories which correspond to the dictionaries you wish create. For each dictionary, there is one directory, which contains the `nodes.tsv` and `variables.tsv` files for that dictionary. Note that the spreadsheets must be named in this way in order for the program to execute as intended.
* `output_yaml/` contains the dictionaries which are generated by the script. Each dictionary corresponds to a directory in `output_yaml/`, and this directory contains the newly generated YAML files for that dictionary.

Usage example (called from within directory `code/`):

```
python dict_creator.py -d examples -n niaid.bionimbus.org
```

The list of variables is collected in a TSV named `variables.tsv` with the following columns (headers):

* `Node`: Schema file (node/category) where the variable belongs.
* `Field`: Name for this variable.
* `Description`: Description provided for this variable in the dictionary.
* `Type`: Type of the variable. Typically, `integer`, `number`, `enum`, `string`.
* `Options`: If Type is `enum`, list of possible values for this variable. Both `|` or `","` separators can be used.
* `Required`: Yes/No depending on whether this variable will be required or not in the dictionary.
* `Term`: (OPTIONAL) Associated standard vocabulary term associated to this variable. E.g. CDISC term.

Links are specified in another TSV named `nodes.tsv` with the following columns (headers):

* `<node>`: Name of the node - e.g., `sample`, `imaging_report`
* `<title>`: Title of the node - e.g., `Sample`, `Imaging Report`
* `<category`: Category to which this node belongs - e.g. `clinical`, `data_file`, `biospecimen`
* `<description>`: Description of node to be included in the schema YAML file
* `<link_name>`: Comma separated list of links for this node, wherein link groups are designated by brackets - e.g., `[subjects,samples],follow_ups`
* `<backref>`: Backref terms for this node - e.g., `samples`, `diagnoses`
* `<label>`: Comma separated list of labels for each link on this node - e.g., `[performed_on,performed_on],performed_at`
* `<target>`: Comma separated list of the names of the of the links for this node - e.g., `[subject,sample],follow_up`
* `<multiplicity>`: Comma separated list of multiplicities for each link - e.g., `[one_to_one,one_to_one],one_to_one`
* `<link_required>`: Comma separated list of boolean values indicating whether each link for this node is required or not - e.g., `[false,false],false`
* `<link_group_required>`: Comma separated list of boolean values indicating whether each node group is required - e.g., if there were two link groups specified, then `false,true`. If no link groups are specified, then leave blank.
* `<group_exclusive>`: Same format as `<link_group_required>`, though each boolean value corresponds to whether each group is exclusive or not
