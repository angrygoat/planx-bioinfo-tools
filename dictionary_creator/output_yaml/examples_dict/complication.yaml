$schema: "http://json-schema.org/draft-04/schema#"

id: "complication"
title: Complication
type: object
namespace: http://www.gen3.org
category: Biomarkers
program: '*'
project: '*'
description: >
  Complications associated to the Laboratory Test
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: laboratory_tests
    backref: complications
    label: related_to
    target_type: laboratory_test
    multiplicity: many_to_one
    required: true

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

required:
  - submitter_id
  - type
  - laboratory_tests

properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"

  symptom:
    description: >
      Symptom of the complication
    enum:
      - "Vomiting"
      - "Nausea"
      - "Significant Back Pain"
      - "Orthostatic Light Head"
      - "Anxiety"
      - "Headache"
      - "Other"

  hospitalization_required:
    description: >
      Foregoing Complication Requiring Hospitalization
    enum:
      - "Yes"
      - "No"

  lasting_over_7_days:
    description: >
      Foregoing Complication Lasting For More Than 7 Days
    enum:
      - "Yes"
      - "No"

  associated_procedure:
    description: >
      Procedure associated to this complication
    enum:
      - "Lumbar Puncture"
      - "Blood Draw"

  lumbar_puncture_code:
    description: >
      Lumbar Puncture Code
    type: string

  laboratory_tests:
    $ref: "_definitions.yaml#/to_one"
